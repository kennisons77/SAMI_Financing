<h1>Listing <%=pluralize(objects.length,objects[0].class.name)%> <%= " for #{parent.title}" unless parent.nil?%></h1>
<% unless objects.empty?%>
<table>
  <thead>
    <tr>
    <% unless objects.blank?  %>      
      <% get_display_cols(objects[0]).each do |label| %>
        <th><%= label %></th>
      <% end %>
    <% end %>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% unless objects.blank? %>
      <% objects.each do |object| %> 
        <tr>          
          <%= render(
            partial:  "shared/cell",
            collection: get_display_cols(object),
            locals: {:object=> object,:parent => parent }) %>              
            <td>
              <%= link_to 'E', edit_polymorphic_url([parent,object]) %>
              <%= link_to 'D', polymorphic_url([parent,object]), method: :delete, data: { confirm: 'Are you sure?' } %>
            </td>
        </tr>
      <% end %>             
    <% else %>
      <tr><td colspan="<%= get_display_cols(objects).count%>">No <%= objects.class %> have been created for <%= parent.class %></td></tr>
    <% end %>
  </tbody>
</table>
<%end%>
